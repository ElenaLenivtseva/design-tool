<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
    
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="/blocks/patterns/true.css">
</head>
<body>
    <div class="true-false">
        <div class="true-false__toShort">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <!-- <div class="swiper-slide">
                        <div class="true-false__wrap">
                            <div class="true-false__main">
                                <h6 class="true-false__title">В честь Томска был назван один из персонажей британского мультсериала «Уомблы» (The Wombles).</h6>
                                <div class="true-false__btns">
                                    <button class="true-false__btn true-false__btn-truth btnTest1">Правда</button>
                                    <button class="true-false__btn true-false__btn-false btnTest1">Ложь</button>
                                </div>
                                <p class="true-false__descr"></p>
                            
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="true-false__wrap">
                            <div class="true-false__main">
                                <h6 class="true-false__title">В честь Томска был назван один из персонажей британского мультсериала «Уомблы» (The Wombles).</h6>
                                <div class="true-false__btns">
                                    <button class="true-false__btn true-false__btn-truth btnTest2">Правда</button>
                                    <button class="true-false__btn true-false__btn-false btnTest2">Ложь</button>
                                </div>
                                <p class="true-false__descr"></p>
                            
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="true-false__wrap">
                            <div class="true-false__main">
                                <h6 class="true-false__title">В честь Томска был назван один из персонажей британского мультсериала «Уомблы» (The Wombles).</h6>
                                <div class="true-false__btns">
                                    <button class="true-false__btn true-false__btn-truth btnTest3">Правда</button>
                                    <button class="true-false__btn true-false__btn-false btnTest3">Ложь</button>
                                </div>
                                <p class="true-false__descr"></p>
                            
                            </div>
                        </div>
                    </div> -->
                    <div class='swiper-slide'><div class='true-false__wrap'><div class='true-false__main'><h6 class='true-false__title'> 1 </h6><div class='true-false__btns'><button class='true-false__btn true-false__btn-truth btnClass-0 '>Правда</button>             <button class='true-false__btn true-false__btn-false btnClass-0 '>Ложь</button></div><p class='true-false__descr'> </p></div>  </div></div><div class="swiper-slide"><div class="true-false__wrap"><div class="true-false__main">        <h6 class="true-false__title"> 2 </h6>          <div class="true-false__btns"> <button class="true-false__btn true-false__btn-truth btnClass-1 ">Правда</button>          <button class="true-false__btn true-false__btn-false btnClass-1 ">Ложь</button>        </div><p class="true-false__descr"> </p></div></div></div><div class="swiper-slide"><div class="true-false__wrap">     <div class="true-false__main">         <h6 class="true-false__title"> 3 </h6>          <div class="true-false__btns">             <button class="true-false__btn true-false__btn-truth btnClass-2 ">Правда</button>             <button class="true-false__btn true-false__btn-false btnClass-2 ">Ложь</button>      </div>          <p class="true-false__descr"> </p>     </div> </div>  </div> ",
    
                </div>
                <!-- <div class="swiper-pagination"></div> -->
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                
                
            </div>
        </div>
    </div>
    <script type="module">
        import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.esm.browser.min.js'
      
        const swiper = new Swiper('.swiper', {
            // Optional parameters
            // loop: true,

            // If we need pagination
            // pagination: {
            //     el: '.swiper-pagination',
            // },

            // Navigation arrows
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },

            // And if we need scrollbar
            // scrollbar: {
            //     el: '.swiper-scrollbar',
            // },
        });
    </script>
    <script>
        
        let response = [
    "<div class='swiper-slide'>\n  <div class='true-false__wrap'>\n      <div class='true-false__main'>\n          <h6 class='true-false__title'> 1 </h6>\n          <div class='true-false__btns'>\n              <button class='true-false__btn true-false__btn-truth btnClass-0 '>Правда</button>\n              <button class='true-false__btn true-false__btn-false btnClass-0 '>Ложь</button>\n          </div>\n          <p class='true-false__descr'> значениеПояснения </p>\n      </div>\n  </div>\n  </div><div class=\"swiper-slide\">\n  <div class=\"true-false__wrap\">\n      <div class=\"true-false__main\">\n          <h6 class=\"true-false__title\"> 2 </h6>\n          <div class=\"true-false__btns\">\n              <button class=\"true-false__btn true-false__btn-truth btnClass-1 \">Правда</button>\n              <button class=\"true-false__btn true-false__btn-false btnClass-1 \">Ложь</button>\n          </div>\n          <p class=\"true-false__descr\"> значениеПояснения </p>\n      </div>\n  </div>\n  </div><div class=\"swiper-slide\">\n  <div class=\"true-false__wrap\">\n      <div class=\"true-false__main\">\n          <h6 class=\"true-false__title\"> 3 </h6>\n          <div class=\"true-false__btns\">\n              <button class=\"true-false__btn true-false__btn-truth btnClass-2 \">Правда</button>\n              <button class=\"true-false__btn true-false__btn-false btnClass-2 \">Ложь</button>\n          </div>\n          <p class=\"true-false__descr\"> значениеПояснения </p>\n      </div>\n  </div>\n  </div> ",
    [
        {
            "name": "fact",
            "value": "Утверждение, которое указывает пользователь"
        },
        {
            "name": "fact",
            "value": "2"
        },
        {
            "name": "fact",
            "value": "3"
        }
    ],
    [
        {
            "name": "descr",
            "value": "Пояснение ответа"
        },
        {
            "name": "descr",
            "value": "22"
        },
        {
            "name": "descr",
            "value": "33"
        }
    ],
    [
        ".btnClass-0",
        ".btnClass-1",
        ".btnClass-2"
    ],
    [
        true,
        false,
        true
    ]
]
        let facts = response[1];
        console.log(facts)
        let descrsDirty = response[2];
        console.log(descrsDirty)
        let btnsClass = response[3];
        console.log(btnsClass)
        let answers = response[4];
        console.log(answers)
        let descrsClean = [];
        descrsClean.length = descrsDirty.length;
        for (let i = 0; i < descrsDirty.length; i++) {
            descrsClean[i] = descrsDirty[i].value;
            
        }
        console.log(descrsClean)
        document.addEventListener('DOMContentLoaded', {handleEvent: pullTitles, facts: facts})
        
        function pullTitles(event) {
          let titles = this.facts;
          let allTitlesElem = document.querySelectorAll('.true-false__title');
          for (let i = 0; i < allTitlesElem.length; i++) {
            allTitlesElem[i].innerText = titles[i].value;
          }
        }

        function forAllCards(btnsClass, answers, descrsClean) {
            for (let i = 0; i < answers.length; i++) {
                let descr = descrsClean[i];
                
                let answer = answers[i];
                console.log(answer)
                let btnTest = document.querySelectorAll(btnsClass[i]);
            
                console.log(btnTest)
                btnTest.forEach(element => {
                        element.addEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
                });
            }
        }
        forAllCards(btnsClass, answers, descrsClean)
        // let descr = 'залупа';
        // let answer = true;
        // let btnTest = document.querySelectorAll('.testBtn');
        
        function handler(event) {
            let answer = this.answer;
            let descr = this.descr;
            // полный тупизм с копией кода, но по какой-то неведомой причине норм решение, работавшее вчера, уже не работает, а это, полностью копирущее его, но с ненужным никому повторением кусков - да
            // нажали на правду и правильный ответ тоже правда
            if (event.target.classList.contains('true-false__btn-truth')&&answer==true) {
                event.target.classList.add('true-false__right-answer')
                if (event.target.nextSibling.nextSibling) {
                    event.target.nextSibling.nextSibling.classList.add('true-false__wrong-answer');
                }
            }
            // нажали на ложь и правильный ответ тоже ложь
            if (event.target.classList.contains('true-false__btn-false')&&answer==false) {
                event.target.classList.add('true-false__right-answer')
                if (event.target.previousSibling.previousSibling) {
                     event.target.previousSibling.previousSibling.classList.add('true-false__wrong-answer');
                }
            }
            // нажали на правду, а правильный ответ ложь
            if (event.target.classList.contains('true-false__btn-truth')&&answer==false) {
                event.target.classList.add('true-false__wrong-answer')
                if (event.target.nextSibling.nextSibling) {
                    event.target.nextSibling.nextSibling.classList.add('true-false__right-answer');
                }
            }
            // нажали на ложь, а правильный ответ правда
            if (event.target.classList.contains('true-false__btn-false')&&answer==true) {
                event.target.classList.add('true-false__wrong-answer')
                if (event.target.previousSibling.previousSibling) {
                     event.target.previousSibling.previousSibling.classList.add('true-false__right-answer');
                }
            }
            // let allBtns = event.target.parentNode.childNodes;
            // console.log(allBtns)
            // // allBtns.forEach(element => {
            // //             element.removeEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
            // // });
            // for (let i = 0; i < allBtns.length; i++) {
            //     console.log(allBtns[i])
            //     // какого-то фига там еще лежит элемент #text, и он посередине. Т.е. длина массива не 2, как я думала,, а три, поэтому внизу я проверяю, чтоб не попало на этого чудака
            //     // allBtns[i].removeEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
            //     if (i==0 || i==2) {
            //         allBtns[i].style.pointerEvents = "none";
            //     }
                
                    
            // }
            // let parent = event.target.parentElement.parentElement;
            // let descrInParent = parent.lastChild.previousElementSibling;
            // console.log(descrInParent);
            // descrInParent.textContent = descr;
            // console.log(answer)

            // if (event.target.classList.contains('true-false__btn-truth')&&answer==true || event.target.classList.contains('true-false__btn-false')&&answer==false) {
            //     event.target.classList.add('true-false__right-answer');
            //     if (event.target.nextSibling.nextSibling) {
            //         event.target.nextSibling.nextSibling.classList.add('true-false__wrong-answer');
            //     }
            //     if (event.target.previousSibling.previousSibling) {
            //         event.target.previousSibling.previousSibling.classList.add('true-false__wrong-answer');
            //     }
            // } else {
            //     event.target.classList.add('true-false__wrong-answer');
            //     if (event.target.nextSibling.nextSibling) {
            //         event.target.nextSibling.nextSibling.classList.add('true-false__right-answer');
            //     }
            //     if (event.target.previousSibling.previousSibling) {
            //         event.target.previousSibling.previousSibling.classList.add('true-false__right-answer');
            //     }
            // }
            // let allBtns = event.target.parentNode.childNodes;

            // for (let i = 0; i < allBtns.length; i++) {
            //     console.log(allBtns[i])
            //     allBtns[i].removeEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
                    
            // }
            let parent = event.target.parentElement.parentElement;
            console.log(parent)
            let descrInParent = parent.lastChild.previousElementSibling.nextSibling;
            console.log(descrInParent);
            descrInParent.textContent = descr;
        }


    </script>
    <!-- <script>
        let btnsClass = ['.btnClass-0', '.btnClass-1', '.btnClass-2'];
        let answers = [true, false, false];
        let descrs = ['залупа1', 'залупа2', 'залупа3']
        function forAllCards(btnsClass, answers, descrs) {
            for (let i = 0; i < answers.length; i++) {
                let descr = descrs[i];
                console.log(descr)
                let answer = answers[i];
                console.log(answer)
                let btnTest = document.querySelectorAll(btnsClass[i]);
                // let classBtnTest = document.querySelectorAll(`${btnTest}`)
                console.log(btnTest)
                btnTest.forEach(element => {
                        element.addEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
                });
            }
        }
        forAllCards(btnsClass, answers, descrs)
        // let descr = 'залупа';
        // let answer = true;
        // let btnTest = document.querySelectorAll('.testBtn');
        
        function handler(event) {
            let answer = this.answer;
            let descr = this.descr;
            if (event.target.classList.contains('true-false__btn-truth')&&answer==true || event.target.classList.contains('true-false__btn-false')&&answer==false) {
                event.target.classList.add('true-false__right-answer');
                if (event.target.nextSibling.nextSibling) {
                    event.target.nextSibling.nextSibling.classList.add('true-false__wrong-answer');
                }
                if (event.target.previousSibling.previousSibling) {
                    event.target.previousSibling.previousSibling.classList.add('true-false__wrong-answer');
                }
            } else {
                event.target.classList.add('true-false__wrong-answer');
                if (event.target.nextSibling.nextSibling) {
                    event.target.nextSibling.nextSibling.classList.add('true-false__right-answer');
                }
                if (event.target.previousSibling.previousSibling) {
                    event.target.previousSibling.previousSibling.classList.add('true-false__right-answer');
                }
            }
            let allBtns = event.target.parentNode.childNodes;

            for (let i = 0; i < allBtns.length; i++) {
                console.log(allBtns[i])
                allBtns[i].removeEventListener('click', {handleEvent: handler, answer: answer, descr: descr});
                    
            }
            let parent = event.target.parentElement.parentElement;
            let descrInParent = parent.lastChild.previousElementSibling;
            console.log(descrInParent);
            descrInParent.textContent = descr;
        }
        // btnTest.forEach(element => {
        //         element.addEventListener('click', handler);
        // });

        // а теперь для нескольких
        // let descrs = ['залупа1', 'залупа2', 'залупа3'];
        // let answers = [true, false, false];
        // // найти, поменять - добавить цифру и точку в начало поставить - regexp
        // let btnsClass = ['.btnTest-1', '.btnTest-2', '.btnTest-3'];

        // function forAllCards(btnsClass, answers, descrs) {
        //     for (let i = 0; i < btnsClass.length; i++) {
        //         let descr = descrs[i];
        //         let answer = answers[i];
        //         let btnTest = document.querySelectorAll(btnsClass[i]);
        //         btnTest.forEach(element => {
        //             element.addEventListener('click', handler());
        //         });
        //     }
        // }
        // forAllCards(btnsClass, answers, descrs)
        
    </script> -->
    <!-- <script src="scripts/cleanIframe.js"></script> -->
</body>
</html>